## 과제의 핵심취지

- React의 hook 이해하기
- 함수형 프로그래밍에 대한 이해
- 액션과 순수함수의 분리

## 과제에서 꼭 알아가길 바라는 점

- 엔티티를 다루는 상태와 그렇지 않은 상태 - cart, isCartFull vs isShowPopup
- 엔티티를 다루는 컴포넌트와 훅 - CartItemView, useCart(), useProduct()
- 엔티티를 다루지 않는 컴포넌트와 훅 - Button, useRoute, useEvent 등
- 엔티티를 다루는 함수와 그렇지 않은 함수 - calculateCartTotal(cart) vs capaitalize(str)

### 기본과제

- Component에서 비즈니스 로직을 분리하기
- 비즈니스 로직에서 특정 엔티티만 다루는 계산을 분리하기
- 뷰데이터와 엔티티데이터의 분리에 대한 이해
- entities -> features -> UI 계층에 대한 이해

- [x] Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?
- [x] 주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?
- [x] 계산함수는 순수함수로 작성이 되었나요?
- [x] 특정 Entitiy만 다루는 함수는 분리되어 있나요?
- [x] 특정 Entitiy만 다루는 Component와 UI를 다루는 Component는 분리되어 있나요?
- [x] 데이터 흐름에 맞는 계층구조를 이루고 의존성이 맞게 작성이 되었나요?

### 심화과제

- 재사용 가능한 Custom UI 컴포넌트를 만들어 보기
- 재사용 가능한 Custom 라이브러리 Hook을 만들어 보기
- 재사용 가능한 Custom 유틸 함수를 만들어 보기
- 그래서 엔티티와는 어떤 다른 계층적 특징을 가지는지 이해하기

- [ ] UI 컴포넌트 계층과 엔티티 컴포넌트의 계층의 성격이 다르다는 것을 이해하고 적용했는가?
- [ ] 엔티티 Hook과 라이브러리 훅과의 계층의 성격이 다르다는 것을 이해하고 적용했는가?
- [ ] 엔티티 순수함수와 유틸리티 함수의 계층의 성격이 다르다는 것을 이해하고 적용했는가?

## 과제 셀프회고

### 과제를 하면서 내가 제일 신경 쓴 부분은 무엇인가요?

이번 과제에서 가장 신경을 쓴 부분은 기본 과제에 주어진 **"컴포넌트에서 비즈니스 로직을 분리하고, 각 책임에 맞게 로직을 나누는 것"**이었습니다.

처음에는 모든 로직을 `useProductManagement` 하나에 다 넣었습니다. 이전 프로젝트에서 서비스를 하나 만들고 모든 로직을 한곳에 모아두던 습관이 있었거든요. 하지만 코드를 분석하면서 한 컴포넌트와 훅이 너무 많은 책임을 가지고 있다는 것을 깨달았습니다.

이를 개선하기 위해 책임에 따라 여러 개의 작은 훅으로 분리했습니다

- `useProductAccordion`: UI 상태(아코디언 열림/닫힘)만 관리
- `useProductEditing`: 상품 편집 관련 상태와 로직만 관
- `useDiscountManagement`: 할인 정보 관리 로직만 담당

또한 상태 변경을 처리하는 **'액션 함수'**와 데이터만 다루는 **'순수 함수'**를 명확히 구분했습니다.  
예를 들어 `updateProductProperty`라는 순수 함수를 만들어 상품 속성을 업데이트하는 로직을 재사용할 수 있게 했습니다.

이렇게 코드를 분리하니 테스트 용이성이 크게 향상된 것을 체감했습니다.  
순수 함수는 입력과 출력이 명확해 단위 테스트를 작성하기 쉽고, 작은 훅들은 각각의 책임만 테스트하면 되기 때문입니다. 테스트 코드 작성에 아직 익숙하지 않아 일부만 구현했지만, 이런 구조라면 훨씬 체계적으로 테스트할 수 있겠다는 생각이 들었습니다.

### 과제를 다시 해보면 더 잘 할 수 있었겠다 아쉬운 점이 있다면 무엇인가요?

1. **순수 함수의 분리 기준**: 처음에는 모든 로직을 작은 순수 함수로 분리하려고 했습니다.  
   예를 들어, `findProductById`, `toggleSetItem` 같은 함수들을 만들었는데, 이런 단순한 로직까지 분리하는 것이 과연 필요한지 고민이 되었습니다.  
   결국 "2번 이상 사용되는가?", "테스트 가치가 있는가?"라는 기준을 세워 불필요한 분리를 줄였지만, 처음부터 이런 기준이 있었다면 더 효율적으로 작업할 수 있었을 것 같습니다.  
   [리팩토링 과정 노션](https://www.notion.so/PR-1dd0c8a1a9ef8065be5be00f1eb6c838?pvs=4#1dd0c8a1a9ef808f843ad2d1ea902223)  
   [균현점 어떻게 찾을지에 대한 고민 노션](https://www.notion.so/PR-1dd0c8a1a9ef8065be5be00f1eb6c838?pvs=4#1de0c8a1a9ef8097af27e764903f523b)

2. **프로젝트 구조**: 처음에는 도메인 중심으로 폴더 구조를 설계했는데(예: `/Cart/_components`, `/Cart/_hooks`), 이것이 엔티티와 비엔티티를 구분하는 과제의 목적과 잘 맞는지 고민이 되었습니다.

   사실 이 부분에서 많은 고민이 있었습니다. 이전 프로젝트에서는 엔티티/비엔티티 구조(models, hooks, components 등)로 코드를 구성했었는데, 컴포넌트가 난잡하게 섞여 필요한 파일을 찾기 어려웠던 경험이 있었습니다. 그래서 이번에는 도메인 중심으로 접근했는데, 이 방식도 문제가 있다는 걸 깨달았습니다.

   예를 들어, cart와 같은 엔티티가 여러 도메인에 걸쳐 사용된다면 오히려 더 복잡해질 수 있겠다는 생각이 들었습니다. 또한 "사용자" 정보처럼 여러 도메인에 걸쳐 사용되는 공통 요소를 어디에 둘지도 고민이었습니다. 공통 폴더에 모아두면 그 폴더가 너무 비대해질 우려도 있고요.

   결국 더 명확한 계층 구조(models, hooks, ui, lib 등)로 설계했다면 엔티티와 비엔티티의 구분이 더 잘 드러났을 것 같습니다. 하지만 아직도 어떤 구조가 더 좋은지는 프로젝트 규모와 팀 선호도에 따라 달라질 수 있다고 생각합니다.

   [프로젝트 구조 설계 고민에 대한 노션](https://www.notion.so/PR-1dd0c8a1a9ef8065be5be00f1eb6c838?pvs=4#1de0c8a1a9ef8017bd95e8519166d73e)

### calculateTotal 분리 과정에서 배운 점

이 부분은 코치님 테스트코드 과정을 따라가면서 분리한 내용입니다.

- 할인 전 총액 계산
- 상품별 할인율 찾기
- 할인 적용된 총액 계산
- 쿠폰 할인 적용
- 결과 객체 반환

1차로 큰 기능 단위로 분리:

```javascript
const calculateTotalBeforeDiscount = (cart) => {
  /* ... */
};
const calculateDiscountedTotal = (cart, totalBeforeDiscount, selectedCoupon) => {
  /* ... */
};
const calculateTotal = (cart, selectedCoupon) => {
  /* ... */
};
```

2차로 더 작은 순수 함수들로 분리:

```javascript
const calculateItemPrice = (item) => {
  /* ... */
};
const findMaxDiscountRate = (item) => {
  /* ... */
};
const calculateDiscountedItemPrice = (item) => {
  /* ... */
};
const applyCouponDiscount = (total, coupon) => {
  /* ... */
};
```

이 과정에서 외부 변수 의존성을 제거하고 함수의 입력과 출력을 명확히 함으로써 순수 함수의 장점을 실감할 수 있었습니다. 또한 작은 단위로 분리함으로써 각 함수가 단일 책임을 가지게 되어 테스트와 재사용이 용이해졌습니다.

반복된 내용이지만, 제가 스스로 Product 부분을 분리하는 것은 "기준"을 세우는게 너무 어려웠습니다. ㅠㅠ

### 리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문

1. **순수 함수 분리의 적절한 수준**: 순수 함수를 분리할 때 "너무 작게 쪼개는 것"과 "적절히 분리하는 것" 사이의 균형점을 찾기 어려웠습니다. 코치님만의 판단하는 방법이 있으실까용?

2. **프로젝트 구조**: 엔티티와 비엔티티를 구분하는 가장 효과적인 프로젝트 구조는 무엇인가요? 도메인 중심(Cart, Product 등)과 계층 중심(models, hooks, components 등) 중 어떤 접근이 더 좋은지 궁금합니다.
   일단 저는 ..! 둘 다 사용해보려고 노력했지만 잘 되지 않았던 것 같네용..
